<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰‹åŠ¨å®ç°instanceofæœºåˆ¶</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .code-block {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .highlight {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .concept-box {
            background-color: #e8f4fd;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .example-box {
            background-color: #f0f8ff;
            border: 1px solid #b3d9ff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .warning-box {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .prototype-chain {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .chain-step {
            background-color: #e9ecef;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 3px solid #007bff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ æ‰‹åŠ¨å®ç°instanceofæœºåˆ¶</h1>
        
        <!-- æ–°å¢ï¼šåŸå‹å’ŒåŸå‹é“¾çŸ¥è¯†æ™®åŠ -->
        <div class="section">
            <h2>ğŸ“š JavaScriptåŸå‹å’ŒåŸå‹é“¾çŸ¥è¯†æ™®åŠ</h2>
            
            <div class="concept-box">
                <h3>ğŸ¯ ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°ï¼Ÿ</h3>
                <p><strong>å¤§ç™½è¯è§£é‡Šï¼š</strong>æ„é€ å‡½æ•°å°±åƒæ˜¯ä¸€ä¸ª"æ¨¡æ¿"æˆ–"æ¨¡å…·"ï¼Œç”¨æ¥æ‰¹é‡åˆ¶é€ ç›¸åŒç±»å‹çš„å¯¹è±¡ã€‚</p>
                <p><strong>æ­£å¼å®šä¹‰ï¼š</strong>æ„é€ å‡½æ•°æ˜¯ç”¨äºåˆ›å»ºå¯¹è±¡çš„å‡½æ•°ï¼Œé€šå¸¸ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚å½“ä½¿ç”¨newå…³é”®å­—è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ï¼Œå¹¶å°†thisç»‘å®šåˆ°è¯¥å®ä¾‹ä¸Šã€‚</p>
                <p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
                <ul>
                    <li>ğŸ­ å·¥å‚é‡Œçš„æ¨¡å…· â†’ æ„é€ å‡½æ•°</li>
                    <li>ğŸ­ ç”¨æ¨¡å…·ç”Ÿäº§çš„äº§å“ â†’ å®ä¾‹å¯¹è±¡</li>
                    <li>ğŸ­ æ¨¡å…·çš„è®¾è®¡å›¾çº¸ â†’ åŸå‹</li>
                </ul>
            </div>

            <div class="example-box">
                <h4>ğŸ’¡ æ„é€ å‡½æ•°ç¤ºä¾‹ï¼š</h4>
                <div class="code-block">
<pre><code>// æ„é€ å‡½æ•°ï¼ˆæ¨¡å…·ï¼‰
function Person(name, age) {
    this.name = name;
    this.age = age;
}

// ç”¨æ„é€ å‡½æ•°åˆ›å»ºå®ä¾‹ï¼ˆäº§å“ï¼‰
const person1 = new Person('å¼ ä¸‰', 25);
const person2 = new Person('æå››', 30);

console.log(person1.name); // 'å¼ ä¸‰'
console.log(person2.name); // 'æå››'</code></pre>
                </div>
            </div>

            <div class="concept-box">
                <h3>ğŸ” ä»€ä¹ˆæ˜¯åŸå‹ï¼ˆprototypeï¼‰ï¼Ÿ</h3>
                <p><strong>å¤§ç™½è¯è§£é‡Šï¼š</strong>åŸå‹å°±åƒæ˜¯ä¸€ä¸ª"å…±äº«å·¥å…·ç®±"ï¼Œæ‰€æœ‰ç”¨åŒä¸€ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªå·¥å…·ç®±é‡Œçš„å·¥å…·ã€‚</p>
                <p><strong>æ­£å¼å®šä¹‰ï¼š</strong>prototypeæ˜¯JavaScriptä¸­å®ç°ç»§æ‰¿çš„æ ¸å¿ƒæœºåˆ¶ã€‚æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†è¯¥æ„é€ å‡½æ•°åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚å½“è®¿é—®å®ä¾‹å¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœå®ä¾‹æœ¬èº«æ²¡æœ‰è¯¥å±æ€§ï¼ŒJavaScriptä¼šæ²¿ç€åŸå‹é“¾æŸ¥æ‰¾prototypeå¯¹è±¡ã€‚</p>
                <p>å…³é”®ç‚¹ï¼š</p>
                <ul>
                    <li>ğŸ“¦ åŸå‹æ˜¯æ„é€ å‡½æ•°çš„ä¸€ä¸ªå±æ€§</li>
                    <li>ğŸ”§ åŸå‹é‡Œçš„æ–¹æ³•/å±æ€§å¯ä»¥è¢«æ‰€æœ‰å®ä¾‹å…±äº«</li>
                    <li>ğŸ’° èŠ‚çœå†…å­˜ï¼Œé¿å…æ¯ä¸ªå®ä¾‹éƒ½å¤åˆ¶ä¸€ä»½ç›¸åŒçš„æ–¹æ³•</li>
                    <li>ğŸ”— æ˜¯JavaScriptå®ç°ç»§æ‰¿çš„åŸºç¡€</li>
                </ul>
            </div>

            <div class="example-box">
                <h4>ğŸ’¡ åŸå‹ç¤ºä¾‹ï¼š</h4>
                <div class="code-block">
<pre><code>function Person(name) {
    this.name = name;
}

// åœ¨åŸå‹ä¸Šæ·»åŠ æ–¹æ³•ï¼ˆå…±äº«å·¥å…·ç®±ï¼‰
Person.prototype.sayHello = function() {
    console.log(`ä½ å¥½ï¼Œæˆ‘æ˜¯${this.name}`);
};

Person.prototype.getAge = function() {
    return this.age || 'æœªçŸ¥';
};

// åˆ›å»ºå®ä¾‹
const person1 = new Person('å¼ ä¸‰');
const person2 = new Person('æå››');

// æ‰€æœ‰å®ä¾‹éƒ½å¯ä»¥ä½¿ç”¨åŸå‹ä¸Šçš„æ–¹æ³•
person1.sayHello(); // 'ä½ å¥½ï¼Œæˆ‘æ˜¯å¼ ä¸‰'
person2.sayHello(); // 'ä½ å¥½ï¼Œæˆ‘æ˜¯æå››'

// æ£€æŸ¥åŸå‹
console.log(Person.prototype); // Personçš„åŸå‹å¯¹è±¡
console.log(person1.__proto__); // æŒ‡å‘Person.prototype
console.log(person1.__proto__ === Person.prototype); // true</code></pre>
                </div>
            </div>

            <div class="concept-box">
                <h3>ğŸ”— ä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Ÿ</h3>
                <p><strong>å¤§ç™½è¯è§£é‡Šï¼š</strong>åŸå‹é“¾å°±åƒæ˜¯ä¸€ä¸ª"ç»§æ‰¿é“¾æ¡"ï¼Œå½“ä½ è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼ŒJavaScriptä¼šæ²¿ç€è¿™ä¸ªé“¾æ¡ä¸€å±‚å±‚å¾€ä¸Šæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚</p>
                <p><strong>æ­£å¼å®šä¹‰ï¼š</strong>åŸå‹é“¾æ˜¯JavaScriptå®ç°ç»§æ‰¿çš„ä¸»è¦æ–¹å¼ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§[[Prototype]]ï¼ˆå¯é€šè¿‡__proto__è®¿é—®ï¼‰ï¼ŒæŒ‡å‘å…¶æ„é€ å‡½æ•°çš„prototypeå¯¹è±¡ã€‚å½“è®¿é—®å¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœå¯¹è±¡æœ¬èº«æ²¡æœ‰è¯¥å±æ€§ï¼ŒJavaScriptä¼šæ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«ç«¯ï¼ˆnullï¼‰ã€‚</p>
                <p>æŸ¥æ‰¾é¡ºåºï¼š</p>
                <ol>
                    <li>ğŸ” å…ˆåœ¨å¯¹è±¡è‡ªå·±èº«ä¸Šæ‰¾</li>
                    <li>ğŸ” æ‰¾ä¸åˆ°å°±å»å¯¹è±¡çš„åŸå‹ä¸Šæ‰¾</li>
                    <li>ğŸ” è¿˜æ‰¾ä¸åˆ°å°±å»åŸå‹çš„åŸå‹ä¸Šæ‰¾</li>
                    <li>ğŸ” ä¸€ç›´æ‰¾åˆ°Object.prototypeï¼ˆæœ€é¡¶å±‚ï¼‰</li>
                    <li>ğŸ” å¦‚æœObject.prototypeä¸Šä¹Ÿæ²¡æœ‰ï¼Œå°±è¿”å›undefined</li>
                </ol>
            </div>

            <div class="prototype-chain">
                <h4>ğŸ”— åŸå‹é“¾å¯è§†åŒ–ï¼š</h4>
                <div class="chain-step">
                    <strong>å®ä¾‹å¯¹è±¡ person1</strong><br>
                    â†“ æŸ¥æ‰¾å±æ€§æ—¶<br>
                    <code>person1.__proto__</code>
                </div>
                <div class="chain-step">
                    <strong>Person.prototype</strong><br>
                    â†“ å¦‚æœè¿˜æ²¡æ‰¾åˆ°ï¼Œç»§ç»­<br>
                    <code>Person.prototype.__proto__</code>
                </div>
                <div class="chain-step">
                    <strong>Object.prototype</strong><br>
                    â†“ æœ€åä¸€çº§<br>
                    <code>Object.prototype.__proto__</code>
                </div>
                <div class="chain-step">
                    <strong>null</strong> (åŸå‹é“¾ç»ˆç‚¹)
                </div>
            </div>

            <div class="example-box">
                <h4>ğŸ’¡ åŸå‹é“¾æŸ¥æ‰¾ç¤ºä¾‹ï¼š</h4>
                <div class="code-block">
<pre><code>function Animal(name) {
    this.name = name;
}

Animal.prototype.species = 'åŠ¨ç‰©';

function Dog(name, breed) {
    Animal.call(this, name);
    this.breed = breed;
}

// å»ºç«‹åŸå‹é“¾å…³ç³»
Dog.prototype = Object.create(Animal.prototype);
Dog.prototype.constructor = Dog;

Dog.prototype.bark = function() {
    console.log('æ±ªæ±ªï¼');
};

const myDog = new Dog('å°ç™½', 'é‡‘æ¯›');

// åŸå‹é“¾æŸ¥æ‰¾æ¼”ç¤º
console.log(myDog.name);        // 'å°ç™½' (è‡ªå·±çš„å±æ€§)
console.log(myDog.breed);       // 'é‡‘æ¯›' (è‡ªå·±çš„å±æ€§)
console.log(myDog.species);     // 'åŠ¨ç‰©' (ä»Animal.prototypeæ‰¾åˆ°)
console.log(myDog.bark);        // function (ä»Dog.prototypeæ‰¾åˆ°)
console.log(myDog.toString);    // function (ä»Object.prototypeæ‰¾åˆ°)

// éªŒè¯åŸå‹é“¾
console.log(myDog.__proto__ === Dog.prototype);           // true
console.log(Dog.prototype.__proto__ === Animal.prototype); // true
console.log(Animal.prototype.__proto__ === Object.prototype); // true
console.log(Object.prototype.__proto__ === null);         // true</code></pre>
                </div>
            </div>

            <div class="warning-box">
                <h4>âš ï¸ é‡è¦æ¦‚å¿µåŒºåˆ†ï¼š</h4>
                <ul>
                    <li><strong>prototype</strong>ï¼šæ„é€ å‡½æ•°çš„å±æ€§ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡</li>
                    <li><strong>__proto__</strong>ï¼šå®ä¾‹å¯¹è±¡çš„å±æ€§ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„prototype</li>
                    <li><strong>constructor</strong>ï¼šåŸå‹å¯¹è±¡çš„å±æ€§ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°</li>
                </ul>
                <p><strong>æŠ€æœ¯ç»†èŠ‚ï¼š</strong></p>
                <ul>
                    <li><strong>prototype</strong>ï¼šå‡½æ•°å¯¹è±¡çš„å±æ€§ï¼Œç”¨äºå®ç°ç»§æ‰¿ï¼ŒåŒ…å«å…±äº«çš„å±æ€§å’Œæ–¹æ³•</li>
                    <li><strong>__proto__</strong>ï¼šå¯¹è±¡çš„å†…éƒ¨å±æ€§[[Prototype]]çš„éæ ‡å‡†è®¿é—®æ–¹å¼ï¼ŒæŒ‡å‘å¯¹è±¡çš„åŸå‹</li>
                    <li><strong>constructor</strong>ï¼šåŸå‹å¯¹è±¡çš„å±æ€§ï¼ŒæŒ‡å‘åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°</li>
                    <li><strong>Object.getPrototypeOf()</strong>ï¼šæ ‡å‡†æ–¹æ³•ï¼Œç”¨äºè·å–å¯¹è±¡çš„åŸå‹</li>
                </ul>
                <div class="code-block">
<pre><code>function Person(name) {
    this.name = name;
}

const person = new Person('å¼ ä¸‰');

// å…³ç³»éªŒè¯
console.log(Person.prototype.constructor === Person);  // true
console.log(person.__proto__ === Person.prototype);    // true
console.log(person.constructor === Person);            // true</code></pre>
                </div>
            </div>

            <div class="concept-box">
                <h3>ğŸ­ instanceof çš„å·¥ä½œåŸç†</h3>
                <p><strong>å¤§ç™½è¯è§£é‡Šï¼š</strong>instanceofå°±æ˜¯æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åœ¨æŸä¸ªæ„é€ å‡½æ•°çš„"å®¶æ—æ ‘"ä¸Šã€‚</p>
                <p><strong>æ­£å¼å®šä¹‰ï¼š</strong>instanceofæ˜¯JavaScriptä¸­çš„äºŒå…ƒæ“ä½œç¬¦ï¼Œç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„prototypeå±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šæ„é€ å‡½æ•°çš„å®ä¾‹ã€‚instanceofæ“ä½œç¬¦ä¼šæ²¿ç€å¯¹è±¡çš„åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æ„é€ å‡½æ•°çš„prototypeå¯¹è±¡æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«ç«¯ã€‚</p>
                <p>æ£€æŸ¥è¿‡ç¨‹ï¼š</p>
                <ol>
                    <li>ğŸ” è·å–æ„é€ å‡½æ•°çš„prototype</li>
                    <li>ğŸ” è·å–å¯¹è±¡çš„åŸå‹é“¾</li>
                    <li>ğŸ” æ²¿ç€åŸå‹é“¾ä¸€å±‚å±‚å¾€ä¸Šæ‰¾</li>
                    <li>ğŸ” å¦‚æœæ‰¾åˆ°åŒ¹é…çš„prototypeï¼Œè¿”å›true</li>
                    <li>ğŸ” å¦‚æœæ‰¾åˆ°nullè¿˜æ²¡æ‰¾åˆ°ï¼Œè¿”å›false</li>
                </ol>
            </div>

            <div class="example-box">
                <h4>ğŸ’¡ instanceof ç¤ºä¾‹ï¼š</h4>
                <div class="code-block">
<pre><code>function Animal() {}
function Dog() {}

Dog.prototype = Object.create(Animal.prototype);

const dog = new Dog();

// instanceof æ£€æŸ¥
console.log(dog instanceof Dog);    // true
console.log(dog instanceof Animal); // true
console.log(dog instanceof Object); // true
console.log(dog instanceof String); // false

// æ‰‹åŠ¨å®ç°instanceofçš„é€»è¾‘
function myInstanceof(obj, constructor) {
    if (obj === null || obj === undefined) return false;
    
    let currentProto = Object.getPrototypeOf(obj);
    const targetProto = constructor.prototype;
    
    while (currentProto !== null) {
        if (currentProto === targetProto) {
            return true;
        }
        currentProto = Object.getPrototypeOf(currentProto);
    }
    return false;
}</code></pre>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“š å®ç°åŸç†</h2>
            <div class="highlight">
                <strong>instanceof æ“ä½œç¬¦åŸç†ï¼š</strong><br>
                instanceof ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚
            </div>
            
            <h3>å®ç°æ­¥éª¤ï¼š</h3>
            <ol>
                <li><strong>è·å–åŸå‹ï¼š</strong>è·å–æ„é€ å‡½æ•°çš„ prototype å±æ€§å’Œå¯¹è±¡çš„åŸå‹é“¾</li>
                <li><strong>åŸå‹é“¾éå†ï¼š</strong>æ²¿ç€å¯¹è±¡çš„åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾</li>
                <li><strong>æ¯”è¾ƒåŒ¹é…ï¼š</strong>æ£€æŸ¥æ¯ä¸€å±‚åŸå‹æ˜¯å¦ä¸æ„é€ å‡½æ•°çš„ prototype ç›¸ç­‰</li>
                <li><strong>ç»ˆæ­¢æ¡ä»¶ï¼š</strong>æ‰¾åˆ°åŒ¹é…è¿”å› trueï¼Œåˆ°è¾¾åŸå‹é“¾é¡¶ç«¯è¿”å› false</li>
            </ol>
            
            <h3>æŠ€æœ¯å®ç°ç»†èŠ‚ï¼š</h3>
            <ul>
                <li><strong>è¾¹ç•Œå¤„ç†ï¼š</strong>æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ºnull/undefinedï¼Œæ„é€ å‡½æ•°æ˜¯å¦ä¸ºå‡½æ•°ç±»å‹</li>
                <li><strong>åŸå‹è·å–ï¼š</strong>ä½¿ç”¨constructor.prototypeè·å–æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</li>
                <li><strong>åŸå‹é“¾éå†ï¼š</strong>ä½¿ç”¨Object.getPrototypeOf()æ ‡å‡†æ–¹æ³•è·å–å¯¹è±¡åŸå‹</li>
                <li><strong>å¾ªç¯ç»ˆæ­¢ï¼š</strong>å½“currentProtoä¸ºnullæ—¶è¡¨ç¤ºåˆ°è¾¾åŸå‹é“¾æœ«ç«¯</li>
                <li><strong>ä¸¥æ ¼æ¯”è¾ƒï¼š</strong>ä½¿ç”¨===è¿›è¡ŒåŸå‹å¯¹è±¡çš„å¼•ç”¨æ¯”è¾ƒ</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ’» æ‰‹åŠ¨å®ç°ä»£ç </h2>
            <div class="code-block">
<pre><code>/**
 * æ‰‹åŠ¨å®ç°instanceofæ“ä½œç¬¦
 * @param {Object} obj - è¦æ£€æŸ¥çš„å¯¹è±¡
 * @param {Function} constructor - æ„é€ å‡½æ•°
 * @returns {boolean} - æ˜¯å¦ä¸ºè¯¥æ„é€ å‡½æ•°çš„å®ä¾‹
 */
function myInstanceof(obj, constructor) {
    // è¾¹ç•Œæƒ…å†µå¤„ç†
    if (obj === null || obj === undefined) {
        return false;
    }
    
    if (typeof constructor !== 'function') {
        throw new TypeError('Right-hand side of instanceof is not callable');
    }
    
    // è·å–æ„é€ å‡½æ•°çš„åŸå‹
    const prototype = constructor.prototype;
    
    // è·å–å¯¹è±¡çš„åŸå‹é“¾
    let currentProto = Object.getPrototypeOf(obj);
    
    // æ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾
    while (currentProto !== null) {
        // å¦‚æœæ‰¾åˆ°åŒ¹é…çš„åŸå‹ï¼Œè¿”å›true
        if (currentProto === prototype) {
            return true;
        }
        // ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾
        currentProto = Object.getPrototypeOf(currentProto);
    }
    
    // åˆ°è¾¾åŸå‹é“¾é¡¶ç«¯ä»æœªæ‰¾åˆ°ï¼Œè¿”å›false
    return false;
}</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ§ª æµ‹è¯•ç”¨ä¾‹</h2>
            <button onclick="runAllTests()">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
            <button onclick="runChallengeTests()">è¿è¡ŒæŒ‘æˆ˜æµ‹è¯•</button>
            <button onclick="runCustomTests()">è¿è¡Œè‡ªå®šä¹‰æµ‹è¯•</button>
            <button onclick="runPrototypeTests()">è¿è¡ŒåŸå‹é“¾æµ‹è¯•</button>
            
            <div id="test-results"></div>
        </div>

        <div class="section">
            <h2>ğŸ“– å…³é”®è¦ç‚¹</h2>
            <ul>
                <li><strong>instanceofæ£€æŸ¥çš„æ˜¯åŸå‹é“¾ä¸Šæ˜¯å¦å­˜åœ¨æ„é€ å‡½æ•°çš„prototype</strong></li>
                <li><strong>éœ€è¦å¤„ç†nullã€undefinedç­‰è¾¹ç•Œæƒ…å†µ</strong></li>
                <li><strong>ä½¿ç”¨Object.getPrototypeOf()è€Œä¸æ˜¯__proto__å±æ€§</strong></li>
                <li><strong>åŸå‹é“¾çš„æŸ¥æ‰¾ä¼šä¸€ç›´åˆ°Object.prototype.__proto__(null)ä¸ºæ­¢</strong></li>
            </ul>
            
            <h3>æŠ€æœ¯è¦ç‚¹æ€»ç»“ï¼š</h3>
            <ul>
                <li><strong>åŸå‹ç»§æ‰¿æœºåˆ¶ï¼š</strong>JavaScripté€šè¿‡åŸå‹é“¾å®ç°å¯¹è±¡é—´çš„ç»§æ‰¿å…³ç³»</li>
                <li><strong>å±æ€§æŸ¥æ‰¾æœºåˆ¶ï¼š</strong>å¯¹è±¡å±æ€§æŸ¥æ‰¾éµå¾ªåŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾çš„è§„åˆ™</li>
                <li><strong>å†…å­˜ä¼˜åŒ–ï¼š</strong>åŸå‹ä¸Šçš„æ–¹æ³•è¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œé¿å…é‡å¤åˆ›å»º</li>
                <li><strong>ç±»å‹æ£€æŸ¥ï¼š</strong>instanceofæ˜¯JavaScriptä¸­é‡è¦çš„ç±»å‹æ£€æŸ¥æœºåˆ¶</li>
                <li><strong>æ ‡å‡†æ–¹æ³•ï¼š</strong>ä¼˜å…ˆä½¿ç”¨Object.getPrototypeOf()ç­‰æ ‡å‡†æ–¹æ³•è€Œé__proto__</li>
            </ul>
        </div>
    </div>

    <script>
        /**
         * æ‰‹åŠ¨å®ç°instanceofæ“ä½œç¬¦
         * @param {Object} obj - è¦æ£€æŸ¥çš„å¯¹è±¡
         * @param {Function} constructor - æ„é€ å‡½æ•°
         * @returns {boolean} - æ˜¯å¦ä¸ºè¯¥æ„é€ å‡½æ•°çš„å®ä¾‹
         */
        function myInstanceof(obj, constructor) {
            // è¾¹ç•Œæƒ…å†µå¤„ç†
            if (obj === null || obj === undefined) {
                return false;
            }
            
            if (typeof constructor !== 'function') {
                throw new TypeError('Right-hand side of instanceof is not callable');
            }
            
            // è·å–æ„é€ å‡½æ•°çš„åŸå‹
            const prototype = constructor.prototype;
            
            // è·å–å¯¹è±¡çš„åŸå‹é“¾
            let currentProto = Object.getPrototypeOf(obj);
            
            // æ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾
            while (currentProto !== null) {
                // å¦‚æœæ‰¾åˆ°åŒ¹é…çš„åŸå‹ï¼Œè¿”å›true
                if (currentProto === prototype) {
                    return true;
                }
                // ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾
                currentProto = Object.getPrototypeOf(currentProto);
            }
            
            // åˆ°è¾¾åŸå‹é“¾é¡¶ç«¯ä»æœªæ‰¾åˆ°ï¼Œè¿”å›false
            return false;
        }

        // æµ‹è¯•å‡½æ•°
        function runTest(testName, testFn) {
            try {
                const result = testFn();
                const resultDiv = document.createElement('div');
                resultDiv.className = `test-result ${result ? 'success' : 'error'}`;
                resultDiv.innerHTML = `<strong>${testName}:</strong> ${result ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}`;
                document.getElementById('test-results').appendChild(resultDiv);
                return result;
            } catch (error) {
                const resultDiv = document.createElement('div');
                resultDiv.className = 'test-result error';
                resultDiv.innerHTML = `<strong>${testName}:</strong> âŒ é”™è¯¯ - ${error.message}`;
                document.getElementById('test-results').appendChild(resultDiv);
                return false;
            }
        }

        // æŒ‘æˆ˜æµ‹è¯•
        function runChallengeTests() {
            document.getElementById('test-results').innerHTML = '<h3>ğŸ¯ æŒ‘æˆ˜æµ‹è¯•ç»“æœï¼š</h3>';
            
            runTest('[] instanceof Array åº”è¿”å› true', () => {
                const arr = [];
                return myInstanceof(arr, Array) === true;
            });
            
            runTest('[] instanceof Object åº”è¿”å› true', () => {
                const arr = [];
                return myInstanceof(arr, Object) === true;
            });
            
            runTest('[] instanceof String åº”è¿”å› false', () => {
                const arr = [];
                return myInstanceof(arr, String) === false;
            });
        }

        // è‡ªå®šä¹‰æµ‹è¯•
        function runCustomTests() {
            document.getElementById('test-results').innerHTML = '<h3>ğŸ”§ è‡ªå®šä¹‰æµ‹è¯•ç»“æœï¼š</h3>';
            
            runTest('null instanceof Object åº”è¿”å› false', () => {
                return myInstanceof(null, Object) === false;
            });
            
            runTest('undefined instanceof Object åº”è¿”å› false', () => {
                return myInstanceof(undefined, Object) === false;
            });
            
            runTest('å­—ç¬¦ä¸² instanceof String åº”è¿”å› false', () => {
                return myInstanceof('hello', String) === false;
            });
            
            runTest('æ•°å­— instanceof Number åº”è¿”å› false', () => {
                return myInstanceof(123, Number) === false;
            });
            
            runTest('è‡ªå®šä¹‰å¯¹è±¡ instanceof Object åº”è¿”å› true', () => {
                const obj = {};
                return myInstanceof(obj, Object) === true;
            });
            
            runTest('è‡ªå®šä¹‰å¯¹è±¡ instanceof Array åº”è¿”å› false', () => {
                const obj = {};
                return myInstanceof(obj, Array) === false;
            });
        }

        // åŸå‹é“¾æµ‹è¯•
        function runPrototypeTests() {
            document.getElementById('test-results').innerHTML = '<h3>ğŸ”— åŸå‹é“¾æµ‹è¯•ç»“æœï¼š</h3>';
            
            // åˆ›å»ºç»§æ‰¿å…³ç³»
            function Animal(name) {
                this.name = name;
            }
            
            function Dog(name, breed) {
                Animal.call(this, name);
                this.breed = breed;
            }
            
            Dog.prototype = Object.create(Animal.prototype);
            Dog.prototype.constructor = Dog;
            
            const dog = new Dog('å°ç™½', 'é‡‘æ¯›');
            
            runTest('dog instanceof Dog åº”è¿”å› true', () => {
                return myInstanceof(dog, Dog) === true;
            });
            
            runTest('dog instanceof Animal åº”è¿”å› true', () => {
                return myInstanceof(dog, Animal) === true;
            });
            
            runTest('dog instanceof Object åº”è¿”å› true', () => {
                return myInstanceof(dog, Object) === true;
            });
            
            runTest('dog instanceof String åº”è¿”å› false', () => {
                return myInstanceof(dog, String) === false;
            });
            
            runTest('éªŒè¯åŸå‹é“¾å…³ç³»', () => {
                return dog.__proto__ === Dog.prototype &&
                       Dog.prototype.__proto__ === Animal.prototype &&
                       Animal.prototype.__proto__ === Object.prototype;
            });
        }

        // æ‰€æœ‰æµ‹è¯•
        function runAllTests() {
            document.getElementById('test-results').innerHTML = '<h3>ğŸ“‹ æ‰€æœ‰æµ‹è¯•ç»“æœï¼š</h3>';
            
            // æŒ‘æˆ˜æµ‹è¯•
            runTest('[] instanceof Array åº”è¿”å› true', () => {
                const arr = [];
                return myInstanceof(arr, Array) === true;
            });
            
            runTest('[] instanceof Object åº”è¿”å› true', () => {
                const arr = [];
                return myInstanceof(arr, Object) === true;
            });
            
            runTest('[] instanceof String åº”è¿”å› false', () => {
                const arr = [];
                return myInstanceof(arr, String) === false;
            });
            
            // è¾¹ç•Œæƒ…å†µæµ‹è¯•
            runTest('null instanceof Object åº”è¿”å› false', () => {
                return myInstanceof(null, Object) === false;
            });
            
            runTest('undefined instanceof Object åº”è¿”å› false', () => {
                return myInstanceof(undefined, Object) === false;
            });
            
            // åŸºæœ¬ç±»å‹æµ‹è¯•
            runTest('å­—ç¬¦ä¸² instanceof String åº”è¿”å› false', () => {
                return myInstanceof('hello', String) === false;
            });
            
            runTest('æ•°å­— instanceof Number åº”è¿”å› false', () => {
                return myInstanceof(123, Number) === false;
            });
            
            // å¯¹è±¡æµ‹è¯•
            runTest('è‡ªå®šä¹‰å¯¹è±¡ instanceof Object åº”è¿”å› true', () => {
                const obj = {};
                return myInstanceof(obj, Object) === true;
            });
            
            runTest('è‡ªå®šä¹‰å¯¹è±¡ instanceof Array åº”è¿”å› false', () => {
                const obj = {};
                return myInstanceof(obj, Array) === false;
            });
            
            // å‡½æ•°æµ‹è¯•
            runTest('å‡½æ•° instanceof Function åº”è¿”å› true', () => {
                const fn = function() {};
                return myInstanceof(fn, Function) === true;
            });
            
            runTest('å‡½æ•° instanceof Object åº”è¿”å› true', () => {
                const fn = function() {};
                return myInstanceof(fn, Object) === true;
            });
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºè¯´æ˜
        window.onload = function() {
            const infoDiv = document.createElement('div');
            infoDiv.className = 'test-result info';
            infoDiv.innerHTML = '<strong>ğŸ’¡ æç¤ºï¼š</strong>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®è¿è¡Œä¸åŒçš„æµ‹è¯•ç”¨ä¾‹æ¥éªŒè¯æ‰‹åŠ¨å®ç°çš„instanceofæœºåˆ¶ã€‚';
            document.getElementById('test-results').appendChild(infoDiv);
        };
    </script>
</body>
</html>